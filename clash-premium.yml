port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090
dns:
  enable: true
  enabled: true
  nameserver:
    - 119.29.29.29
    - 223.5.5.5
  fallback:
    - 8.8.8.8
    - 8.8.4.4
    - tls://1.0.0.1:853
    - tls://dns.google:853

proxy-providers:
  All:
    type: http
    url: "https://api.v1.mk/sub?target=clash&url=ä½ çš„è®¢é˜…é“¾æ¥&list=true&udp=true"
    # å¯ä»¥ä½¿ç”¨ä»»æ„ç±»å‹çš„é“¾æ¥æ›¿æ¢ä¸Šé¢æ–‡å­—ï¼Œå¤šä¸ªé“¾æ¥ä½¿ç”¨è‹±æ–‡ç¬¦å·çš„ç«–æ |éš”å¼€ä¸€èµ·å†™ä¸Šå³å¯ï¼›ä¹Ÿå¯ä»¥å°†Clashè®¢é˜…é“¾æ¥æ›¿æ¢æ‰æ•´ä¸ªå¼•å·""å†…çš„é“¾æ¥
    interval: 3600
    path: ./all.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

proxies:
# shadowsocks
# æ‰€æ”¯æŒçš„åŠ å¯†æ–¹å¼ä¸ go-shadowsocks2 ä¿æŒä¸€è‡´
# æ”¯æŒåŠ å¯†æ–¹å¼ï¼š
#   aes-128-gcm aes-192-gcm aes-256-gcm
#   aes-128-cfb aes-192-cfb aes-256-cfb
#   aes-128-ctr aes-192-ctr aes-256-ctr
#   rc4-md5 chacha20-ietf xchacha20
#   chacha20-ietf-poly1305 xchacha20-ietf-poly1305

# Shadowsocks
# ç¬¬ä¸€ç§é…ç½®
#- name: "ä½ çš„SSèŠ‚ç‚¹1"               # è½¯ä»¶æ˜¾ç¤ºçš„èŠ‚ç‚¹åå­—
#  type: ss                                  # ä»£ç†ç±»å‹
#  server: 1.2.4.8                          # æœåŠ¡å™¨ IP
#  port: 443                                 #  ç«¯å£å·
#  cipher: chacha20-ietf-poly1305   # åŠ å¯†æ–¹æ³•
#  password: "password"                # SS å¯†ç 
#  # udp: true                                #é»˜è®¤ä¸å¼€å¯

# Shadowsocks + simple-obfs
# ç¬¬äºŒç§é…ç½®
#- name: "ä½ çš„SSèŠ‚ç‚¹2"               # è½¯ä»¶æ˜¾ç¤ºçš„èŠ‚ç‚¹åå­—
#  type: ss                                  # ä»£ç†ç±»å‹
#  server: 1.2.4.8                          # æœåŠ¡å™¨ IP
#  port: 443                                 #  ç«¯å£å·
#  cipher: chacha20-ietf-poly1305   # åŠ å¯†æ–¹æ³•
#  password: "password"                # SS å¯†ç 
#  plugin: obfs
#  plugin-opts:
#    mode: tls # or http               #  å¤§éƒ¨åˆ†é€‰æ‹© HTTP
#  #  host: bing.com                  #  ä¼ªè£…

# Shadowsocks + v2ray-plugin
# ç¬¬ä¸‰ç§é…ç½®
# - name: "ä½ çš„SSèŠ‚ç‚¹3"
#   type: ss
#   server: 1.2.4.8
#   port: 443
#   cipher: chacha20-ietf-poly1305
#   password: "password"
#   plugin: v2ray-plugin
#   plugin-opts:
#     mode: websocket # no QUIC now
#     # tls: true # wss
#     # skip-cert-verify: true
#     # host: bing.com
#     # path: "/"
#     # mux: true
#     # headers:
#     #   custom: value

# vmess
# æ”¯æŒåŠ å¯†æ–¹å¼ï¼šauto / aes-128-gcm / chacha20-poly1305 / none
- name: "ä½ çš„è‡ªå»ºèŠ‚ç‚¹"
  type: vmess
  server: server
  port: 443
  uuid: uuid
  alterId: 32
  cipher: auto
  udp: true
  tls: true
  skip-cert-verify: true
  network: ws
  ws-path: /path
  ws-headers:
    Host: v2ray.com

# socks5
# - name: "socks"
#   type: socks5
#   server: server
#   port: 443
#   username: username
#   password: password
#   tls: true
#   skip-cert-verify: true
#   udp: true

# http
# - name: "http"
#   type: http
#   server: server
#   port: 443
#   username: username
#   password: password
#   tls: true # https
#   skip-cert-verify: true

# snell
# - name: "snell"
#   type: snell
#   server: server
#   port: 44046
#   psk: yourpsk
#   obfs-opts:
  #   mode: http # æˆ– tls
  #   host: bing.com

# Trojançš„é…ç½®
# - name: "trojan"
#   type: trojan
#   server: server
#   port: 443
#   password: password
#   #ä¸Šé¢å‡ è¡Œä¸ºå¿…é€‰å‚æ•°
#   #ä¸‹é¢å‡ è¡Œä¸ºå¯é€‰å‚æ•°  æ ¹æ®ä½ çš„é…ç½®æƒ…å†µæ¥
#   # udp: true
#   # sni: example.com # aka server name
#   # alpn:
#   #   - h2
#   #   - http/1.1
#   # skip-cert-verify: true

proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    use:
      - All
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ”¯ æ•…éšœè½¬ç§»
      - ğŸ”® è´Ÿè½½å‡è¡¡
      - ğŸ”— é“¾å¼ä»£ç†
      - DIRECT

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    use:
       - All
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 50
    
  - name: ğŸ”¯ æ•…éšœè½¬ç§»
    type: fallback
    use:
       - All
    url: "http://www.gstatic.com/generate_204"
    interval: 180
    
  - name: ğŸ”® è´Ÿè½½å‡è¡¡
    type: load-balance
    use:
       - All
    url: "http://www.gstatic.com/generate_204"
    interval: 180

  - name: ğŸ”— é“¾å¼ä»£ç†
    type: relay
    proxies:
       - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
       - ä½ çš„è‡ªå»ºèŠ‚ç‚¹           #ä½ çš„è‡ªå»ºèŠ‚ç‚¹name

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©

  - name: ğŸ›‘ å…¨çƒæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿

rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400

rules:
  - RULE-SET,applications,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN,clash.razord.top,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN,yacd.haishan.me,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,private,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,reject,ğŸ›‘ å…¨çƒæ‹¦æˆª
  - RULE-SET,icloud,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,direct,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,lancidr,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cncidr,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,telegramcidr,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - GEOIP,LAN,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
